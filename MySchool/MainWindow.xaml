<Window x:Class="MySchool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MySchool"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        mc:Ignorable="d"
        Title="MySchool"
        Background="{StaticResource Brush.Background}"
        WindowStyle="None"
        ResizeMode="CanResize"
        AllowsTransparency="False"
        Icon="resources/logo/png/Dark-Icon.png"
        FontFamily="{StaticResource Font.Main}">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="0"
                             ResizeBorderThickness="6"
                             CornerRadius="32"
                             GlassFrameThickness="0"
                             UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>
    <Window.Resources>
        <!-- Use global resources from App.xaml -->
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="464*"/>
            <ColumnDefinition Width="189*"/>
            <ColumnDefinition Width="275*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top App Bar -->
        <Border x:Name="AppBar" Grid.Row="0" Background="{StaticResource Brush.Surface}" Height="64" MouseLeftButtonDown="AppBar_MouseLeftButtonDown" Grid.ColumnSpan="3">
            <Border.Effect>
                <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.06"/>
            </Border.Effect>
            <Grid Margin="16,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="16"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Width="36" Height="36" CornerRadius="8" BorderThickness="0" VerticalAlignment="Center">
                        <Border.Background>
                            <ImageBrush ImageSource="resources/logo/png/Dark-Icon.png" Stretch="UniformToFill"/>
                        </Border.Background>
                    </Border>
                    <TextBlock Text="MySchool" FontSize="20" FontWeight="SemiBold" Margin="10,0,0,0" Foreground="{StaticResource Brush.TextPrimary}" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Center tab icons: Schedule | Home | Settings -->
                <Border Style="{StaticResource Card}" Grid.Column="2" Background="#EEF2FF" CornerRadius="18" Padding="6,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <Button x:Name="ScheduleTab" Style="{StaticResource CaptionButton}" Click="ScheduleTab_Click" ToolTip="Schedule" Margin="2,0">
                            <TextBlock x:Name="ScheduleTabIcon" FontFamily="Segoe MDL2 Assets" FontSize="14" Text="&#xE163;" Foreground="{StaticResource Brush.TextSecondary}"/>
                        </Button>
                        <Button x:Name="HomeTab" Style="{StaticResource CaptionButton}" Click="HomeTab_Click" ToolTip="Home" Margin="2,0">
                            <TextBlock x:Name="HomeTabIcon" FontFamily="Segoe MDL2 Assets" FontSize="14" Text="&#xE80F;" Foreground="{StaticResource Brush.TextSecondary}"/>
                        </Button>
                        <Button x:Name="SettingsTab" Style="{StaticResource CaptionButton}" Click="SettingsTab_Click" ToolTip="Settings" Margin="2,0">
                            <TextBlock x:Name="SettingsTabIcon" FontFamily="Segoe MDL2 Assets" FontSize="14" Text="&#xE713;" Foreground="{StaticResource Brush.TextSecondary}"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Search box -->

                <!-- Profile / actions -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center"/>

                <!-- Caption buttons -->
                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Style="{StaticResource CaptionButton}" Click="MaxRestoreButton_Click" ToolTip="Maximize/Restore" Visibility="Hidden">
                        <TextBlock x:Name="MaxIcon" FontFamily="Segoe MDL2 Assets" FontSize="12" Text="&#xE922;"/>
                    </Button>
                    <Button Style="{StaticResource CaptionButton}" Click="MinimizeButton_Click" ToolTip="Minimize">
                        <TextBlock FontFamily="Segoe MDL2 Assets" FontSize="12" Text="&#xE921;"/>
                    </Button>
                    <Button Style="{StaticResource CaptionButton.Close}" Click="CloseButton_Click" ToolTip="Close">
                        <TextBlock FontFamily="Segoe MDL2 Assets" FontSize="12" Text="&#xE8BB;"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Content host -->
        <Frame x:Name="ContentFrame" Grid.Row="1" Grid.ColumnSpan="3" NavigationUIVisibility="Hidden"/>
    </Grid>
</Window>
