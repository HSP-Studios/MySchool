<Window x:Class="MySchool.Windows.TimetableEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
   Title="Timetable Editor"
        WindowStyle="None"
   ResizeMode="CanResize"
 AllowsTransparency="False"
  Background="{DynamicResource Brush.Background}"
        Width="1000"
        Height="700"
MinWidth="800"
        MinHeight="600"
        WindowStartupLocation="CenterOwner"
        FontFamily="{StaticResource Font.Main}">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="0"
     ResizeBorderThickness="6"
           CornerRadius="16"
        GlassFrameThickness="0"
          UseAeroCaptionButtons="False"/>
    </shell:WindowChrome.WindowChrome>

    <Border Background="{DynamicResource Brush.Background}" CornerRadius="16" BorderThickness="1" BorderBrush="{DynamicResource Brush.Primary}">
        <Grid Margin="24">
     <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
  <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
  <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

       <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,16">
          <TextBlock Text="Timetable Editor" Style="{StaticResource Text.Headline}"/>
   <Button Style="{StaticResource CaptionButton.Close}" 
   HorizontalAlignment="Right" 
        Click="CloseButton_Click"
        ToolTip="Close">
     <TextBlock FontFamily="Segoe MDL2 Assets" FontSize="12" Text="&#xE8BB;"/>
                </Button>
            </Grid>

            <!-- Toolbar -->
  <Grid Grid.Row="1" Margin="0,0,0,16">
          <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
           <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
   </Grid.ColumnDefinitions>

     <!-- Day Selector -->
     <StackPanel Grid.Column="0" Orientation="Horizontal">
         <TextBlock Text="Day:" 
      Style="{StaticResource Text.Body}" 
     VerticalAlignment="Center" 
      Margin="0,0,8,0"/>
                 <ComboBox x:Name="DayComboBox" 
               Width="150" 
    SelectionChanged="DayComboBox_SelectionChanged"
    Style="{DynamicResource ComboBox.Standard}"/>
       </StackPanel>

                <!-- Action Buttons -->
      <StackPanel Grid.Column="2" Orientation="Horizontal">
   <Button x:Name="AddPeriodButton" 
                Style="{StaticResource Button.Primary}" 
   Content="Add Period" 
  Padding="12,6"
        Margin="0,0,8,0"
     Click="AddPeriodButton_Click">
           <Button.ContentTemplate>
               <DataTemplate>
   <StackPanel Orientation="Horizontal">
          <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE710;" VerticalAlignment="Center" Margin="0,0,6,0"/>
             <TextBlock Text="Add Period" VerticalAlignment="Center"/>
            </StackPanel>
       </DataTemplate>
   </Button.ContentTemplate>
  </Button>
      <Button x:Name="ReorderButton" 
       Style="{StaticResource Button.Secondary}" 
      Content="Reorder" 
          Padding="12,6"
                 Click="ReorderButton_Click"
    ToolTip="Automatically renumber periods sequentially">
               <Button.ContentTemplate>
          <DataTemplate>
    <StackPanel Orientation="Horizontal">
    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8CB;" VerticalAlignment="Center" Margin="0,0,6,0"/>
        <TextBlock Text="Reorder" VerticalAlignment="Center"/>
         </StackPanel>
  </DataTemplate>
       </Button.ContentTemplate>
                    </Button>
  </StackPanel>
         </Grid>

      <!-- Periods List -->
            <Border Grid.Row="2" 
     Style="{StaticResource Card}" 
         Padding="0">
        <Grid>
 <!-- No periods message -->
     <StackPanel x:Name="NoPeriodsPanel" 
          HorizontalAlignment="Center" 
         VerticalAlignment="Center"
     Visibility="Collapsed">
        <TextBlock FontFamily="Segoe MDL2 Assets" 
FontSize="48" 
   Text="&#xE8A5;" 
          HorizontalAlignment="Center"
     Foreground="{DynamicResource Brush.Primary}"
            Margin="0,0,0,12"/>
          <TextBlock Style="{StaticResource Text.Title}" 
      Text="No Periods for This Day" 
       HorizontalAlignment="Center"
        Margin="0,0,0,6"/>
     <TextBlock Style="{StaticResource Text.Body}" 
  Text="Click 'Add Period' to create a new period." 
          HorizontalAlignment="Center"
       Foreground="{DynamicResource Brush.TextSecondary}"/>
     </StackPanel>

   <!-- Periods DataGrid -->
      <DataGrid x:Name="PeriodsDataGrid"
       AutoGenerateColumns="False"
       CanUserAddRows="False"
   CanUserDeleteRows="True"
    CanUserReorderColumns="False"
           CanUserSortColumns="True"
       SelectionMode="Single"
       Background="Transparent"
 BorderThickness="0"
       GridLinesVisibility="Horizontal"
  HorizontalGridLinesBrush="{DynamicResource Brush.Border}"
            RowHeaderWidth="0"
        HeadersVisibility="Column"
  AlternatingRowBackground="{DynamicResource Brush.CardHover}"
     Margin="16">
       <DataGrid.Resources>
       <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{DynamicResource Brush.Background}"/>
      <Setter Property="Foreground" Value="{DynamicResource Brush.Text}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
 <Setter Property="Padding" Value="12,8"/>
 <Setter Property="BorderThickness" Value="0,0,0,2"/>
 <Setter Property="BorderBrush" Value="{DynamicResource Brush.Primary}"/>
        </Style>
          <Style TargetType="DataGridCell">
  <Setter Property="Background" Value="Transparent"/>
  <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="8"/>
          </Style>
              <Style TargetType="DataGridRow">
        <Setter Property="Background" Value="Transparent"/>
           <Style.Triggers>
         <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{DynamicResource Brush.CardHover}"/>
             </Trigger>
</Style.Triggers>
    </Style>
        </DataGrid.Resources>

   <DataGrid.Columns>
  <!-- Period Number -->
             <DataGridTextColumn Header="#" 
     Binding="{Binding PeriodNumber}" 
          Width="60"
           IsReadOnly="False"/>

     <!-- Subject -->
                  <DataGridTextColumn Header="Subject" 
  Binding="{Binding Subject, UpdateSourceTrigger=PropertyChanged}" 
     Width="*"
              MinWidth="120"
           IsReadOnly="False"/>

        <!-- Teacher -->
                <DataGridTextColumn Header="Teacher" 
       Binding="{Binding Teacher, UpdateSourceTrigger=PropertyChanged}" 
         Width="*"
         MinWidth="100"
              IsReadOnly="False"/>

           <!-- Room -->
         <DataGridTextColumn Header="Room" 
         Binding="{Binding Room, UpdateSourceTrigger=PropertyChanged}" 
       Width="100"
         IsReadOnly="False"/>

 <!-- Start Time -->
          <DataGridTextColumn Header="Start Time" 
         Binding="{Binding StartTime, UpdateSourceTrigger=PropertyChanged}" 
       Width="100"
  IsReadOnly="False"/>

  <!-- End Time -->
           <DataGridTextColumn Header="End Time" 
         Binding="{Binding EndTime, UpdateSourceTrigger=PropertyChanged}" 
Width="100"
    IsReadOnly="False"/>

 <!-- Is Break -->
         <DataGridCheckBoxColumn Header="Break" 
  Binding="{Binding IsBreak, UpdateSourceTrigger=PropertyChanged}" 
            Width="70"/>

              <!-- Delete Button -->
       <DataGridTemplateColumn Header="Actions" Width="80">
                  <DataGridTemplateColumn.CellTemplate>
       <DataTemplate>
 <Button Style="{StaticResource Button.Secondary}" 
             Content="Delete" 
         Padding="8,4"
      FontSize="11"
   Click="DeletePeriodButton_Click"
   Tag="{Binding}">
           <Button.ContentTemplate>
      <DataTemplate>
    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE74D;" FontSize="12"/>
        </DataTemplate>
            </Button.ContentTemplate>
     </Button>
       </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
         </DataGridTemplateColumn>
        </DataGrid.Columns>
       </DataGrid>
    </Grid>
            </Border>

     <!-- Action Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
       <Button Style="{StaticResource Button.Secondary}" 
        Content="Cancel" 
      Padding="16,8"
      Margin="0,0,8,0"
  Click="CancelButton_Click"/>
         <Button x:Name="SaveButton" 
           Style="{StaticResource Button.Primary}" 
         Content="Save Changes" 
                    Padding="16,8"
               Click="SaveButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
